<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Joel's Portfolio</title>
        <meta name="description" content="My name is Joel Kennedy. I'm an entrepreneur, art director, food lover, and world traveler." />
        <meta name="author" content="Joel Kennedy">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="icon" href="//favicon.ico" type="image/x-icon" sizes="16x16">
        <link rel="stylesheet" href="css/application.css" />
        <!--[if lt IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.2/html5shiv.js"></script><![endif]-->
    </head>
    <body>
        <div class="wrapper">

            <div class="galleryTouch2">
              <div class="swipe-imgs">
                <div class="testbg sweetarts"></div>
                <div class="testbg lasagna"></div>
                <div class="testbg london"></div>
              </div>
               <div data-name="SweeTarts" class="nav-widget">
                    <i class="widget-icon"></i>
                    <button class="widget-btn next"></button>
                    <button class="widget-btn prev"></button>
                </div>
            </div>





        </div>
        <script src="js/commondev.js"></script>
        <script src="js/jquery.min.js"></script>
        <script src="js/jquery.touchswipe.min.js"></script>
        <script src="js/modernizr.custom.js"></script>
        <script>
        var slider = {};

        
            (function(){
                var $w = $(window)
                var IMG_WIDTH = $w.width(),
                currentImg=0,
                maxImages=3,
                speed=500,
                imgs = $(".testbg");

               


                if(!Modernizr.cssvwunit){
                //Init touch swipe
                    imgs.swipe( {
                        triggerOnTouchEnd : true,
                        swipeStatus : swipeStatus,
                        allowPageScroll:"vertical"
                    });
                }

                /**
                * Catch each phase of the swipe.
                * move : we drag the div.
                * cancel : we animate back to where we were
                * end : we animate to the next image
                */
                function swipeStatus(event, phase, direction, distance, fingers)
                {
                    //If we are moving before swipe, and we are going L or R, then manually drag the images
                    if( phase=="move" && (direction=="left" || direction=="right") )
                    {
                        var duration=0;
                        if (direction == "left")
                            scrollImages((IMG_WIDTH * currentImg) + distance, duration);

                        else if (direction == "right")
                            scrollImages((IMG_WIDTH * currentImg) - distance, duration);
                    }

                    //Else, cancel means snap back to the begining
                    else if ( phase == "cancel")
                    {
                        scrollImages(IMG_WIDTH * currentImg, speed);
                    }

                    //Else end means the swipe was completed, so move to the next image
                    else if ( phase =="end" )
                    {
                        if (direction == "right")
                            prevImage()
                        else if (direction == "left")
                            nextImage()
                    }
                }

                function prevImage()
                {
                    currentImg = Math.max(currentImg-1, 0);
                    scrollImages(currentImg, speed);
                    //pixel based
                    //scrollImages( IMG_WIDTH * currentImg, speed);
                }

                function nextImage()
                {
                    currentImg = Math.min(currentImg+1, maxImages-1);
                    scrollImages(currentImg, speed);
                    //pixel based
                    //scrollImages( IMG_WIDTH * currentImg, speed);
                    
                }

                /**
                 * Manually update the position of the imgs on drag
                 */
                function scrollImages(distance, duration)
                {
                    imgs.css("-webkit-transition-duration", (duration/1000).toFixed(1) + "s");

                    //inverse the number we set in the css
                    var value = (distance<0 ? "" : "-") + distance*100 + "%";
                    //pixel based
                    //var value = (distance<0 ? "" : "-") + Math.abs(distance).toString();



                    imgs.css("-webkit-transform", "translate3d("+value +",0px,0px)");
                }

                function updateInternalVals(){
                    IMG_WIDTH = $w.width();
                    clog('ran');
                }



                //===== UTIL functions =====//
                var timer={};
                function delayTimer(func, time){
                    clearTimeout(timer);
                    var name = func.name || func.toString().match(/^function\s*([^\s(]+)/)[1]
                    timer[func] = setTimeout(func, time || 0);
                }
               


                //Attach handlers
                $('.nav-widget .next').click(nextImage)
                $('.nav-widget .prev').click(prevImage)
                $w.resize(function(){
                    delayTimer(updateInternalVals, 0)
                });

            })();
      



        //=== Scott Gehls scroll top onload ===//
        var ios6Hideurl = function( win ){
            var doc = win.document;
            
            // If there's a hash, or addEventListener is undefined, stop here
            if( !location.hash && win.addEventListener ){
                
                //scroll to 1
                window.scrollTo( 0, 1 );
                var scrollTop = 1,
                    getScrollTop = function(){
                        return win.pageYOffset || doc.compatMode === "CSS1Compat" && doc.documentElement.scrollTop || doc.body.scrollTop || 0;
                    },
                
                    //reset to 0 on bodyready, if needed
                    bodycheck = setInterval(function(){
                        if( doc.body ){
                            clearInterval( bodycheck );
                            scrollTop = getScrollTop();
                            win.scrollTo( 0, scrollTop === 1 ? 0 : 1 );
                        }   
                    }, 15 );
                
                win.addEventListener( "load", function(){
                    setTimeout(function(){
                        //at load, if user hasn't scrolled more than 20 or so...
                        if( getScrollTop() < 20 ){
                            //reset to hide addr bar at onload
                            win.scrollTo( 0, scrollTop === 1 ? 0 : 1 );
                        }
                    }, 0);
                } );
            }
        }
        ios6Hideurl(window);
        </script>
    </body>
</html>